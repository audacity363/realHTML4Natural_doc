<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Html Parser &#8212; realHTML4Natural 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="realHTML4Natural 1.0 documentation" href="index.html" />
    <link rel="next" title="Workflow" href="workflow.html" />
    <link rel="prev" title="Natural" href="natural.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="html-parser">
<h1>Html Parser<a class="headerlink" href="#html-parser" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<span id="template-example"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The syntax of the templates are inspirited from the template engine <a class="reference external" href="http://jinja.pocoo.org/">jinja</a> which is written in python.</p>
<p>In contrast to natural4ajax you will write here your own HTML code. In your HTML code you can use two types of blocks to refer to variables or check them if they equals to a specific condition.</p>
<p>Here is an simple example:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="x"> &lt;html&gt;</span>
<span class="x">     &lt;head&gt;</span>
<span class="x">         &lt;title&gt;Hello World&lt;/title&gt;</span>
<span class="x">     &lt;/head&gt;</span>
<span class="x">     &lt;body&gt;</span>
<span class="x">         &lt;table&gt;</span>
<span class="x">             &lt;thead&gt;</span>
<span class="x">                 &lt;th&gt;id&lt;/th&gt;</span>
<span class="x">                 &lt;th&gt;name&lt;/th&gt;</span>
<span class="x">                 &lt;th&gt;lastname&lt;/th&gt;</span>
<span class="x">            &lt;/thead&gt;</span>
<span class="x">            &lt;tbody&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">username</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;tr&gt;</span>
<span class="x">                     &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">isnnumber</span><span class="o">[</span><span class="nb">loop</span><span class="nv">.i</span><span class="o">]&lt;/</span><span class="nv">tr</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="nv">td</span><span class="o">&gt;{{</span> <span class="nv">user</span> <span class="cp">}}</span><span class="x">&lt;/tr&gt;</span>
<span class="x">                     &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">firstname</span><span class="o">[</span><span class="nb">loop</span><span class="nv">.i</span><span class="o">]</span> <span class="cp">}}</span><span class="x">&lt;/tr&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">end</span><span class="o">-</span><span class="nv">for</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;/tbody&gt;</span>
<span class="x">        &lt;/table&gt;</span>
<span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
<p>With the LDA:</p>
<div class="highlight-cobolfree"><div class="highlight"><pre><span class="nv">define</span> <span class="kr">data</span> <span class="nv">local</span>
<span class="mi">1 </span><span class="kp">page</span>
<span class="kp">  </span> <span class="mi">2 </span><span class="nv">isnnumber</span> <span class="p">(</span><span class="nv">N19</span><span class="o">/</span><span class="mi">1</span><span class="p">:</span><span class="mi">20</span><span class="p">)</span>
   <span class="mi">2 </span><span class="nv">username</span> <span class="p">(</span><span class="nv">A20</span><span class="o">/</span><span class="mi">1</span><span class="p">:</span><span class="mi">20</span><span class="p">)</span>
   <span class="mi">2 </span><span class="nv">firstname</span> <span class="p">(</span><span class="nv">A20</span><span class="o">/</span><span class="mi">1</span><span class="p">:</span><span class="mi">20</span><span class="p">)</span>
<span class="nv">end-define</span>
</pre></div>
</div>
<p>There are two types of blocks. First the variable block (<code class="code docutils literal"><span class="pre">{{</span> <span class="pre">...</span> <span class="pre">}}</span></code>) which will just be replaced with the value of the variable and second the command block (<code class="code docutils literal"><span class="pre">{%</span> <span class="pre">...</span> <span class="pre">%}</span></code>). The command block reacts like a if or  for block in natural. It have a command line (the first one) where you specify the break condition and a end line where the block ends.</p>
</div>
<div class="section" id="variable-blocks">
<h2>Variable blocks<a class="headerlink" href="#variable-blocks" title="Permalink to this headline">¶</a></h2>
<p>As in the section <a class="reference internal" href="natural.html#template-vars"><span class="std std-ref">Variables for the template</span></a> explained you have available every variable that is defined under the page group in your LDA. If a variable is not known the HTML parser will exit with an error message and will be render a error page instead. Currently (Version 1.0) it is not possible to add two variable blocks in one line. The parser would just print out the complete block without parsing it. I am working on this problem.</p>
<div class="section" id="plain-variable">
<h3>Plain variable:<a class="headerlink" href="#plain-variable" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s assume that you have defined a variable with the name &#8220;varname&#8221; which has the type alphanumeric with the length of 20 bytes. When you just write <code class="code docutils literal"><span class="pre">{{</span> <span class="pre">varname</span> <span class="pre">}}</span></code> it would be replaced with the value. But you can also handle it as an array by adding square brackets after the name: <code class="code docutils literal"><span class="pre">{{</span> <span class="pre">varname[0]</span> <span class="pre">}}</span></code>. Now you would get the value saved at the position zero of the variable. If you have spaces at the end the parser will automatically trim the value to the last non space character.</p>
</div>
<div class="section" id="arrays">
<h3>Arrays:<a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h3>
<p>Now let&#8217;s chance the variable to array with 10 occurrences. In this situation the behavior of the variable block change a little bit. It will be still replace the complete block with the value but when you don&#8217;t specify a index a JSON string will be generated and printed out. But when you don&#8217;t what that you can specify a index in square brackets (<code class="code docutils literal"><span class="pre">{{</span> <span class="pre">varname[0]</span> <span class="pre">}}</span></code>). Even here you can access the individual characters with a second index (<code class="code docutils literal"><span class="pre">{{</span> <span class="pre">varname[0][1]</span> <span class="pre">}}</span></code>).</p>
<div class="section" id="example">
<span id="array-example"></span><h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>The variable: <code class="code docutils literal"><span class="pre">2</span> <span class="pre">varname(A20/1:10)</span></code></p>
<p>The HTML-code: <code class="code docutils literal"><span class="pre">{{</span> <span class="pre">varname</span> <span class="pre">}}</span></code></p>
<p>The output: <code class="code docutils literal"><span class="pre">['value</span> <span class="pre">1',</span> <span class="pre">'value</span> <span class="pre">2',</span> <span class="pre">'value</span> <span class="pre">3',</span> <span class="pre">'value</span> <span class="pre">4',</span> <span class="pre">'value</span> <span class="pre">5',</span> <span class="pre">'value</span> <span class="pre">6',</span> <span class="pre">'value</span> <span class="pre">7',</span> <span class="pre">'value</span> <span class="pre">8',</span> <span class="pre">'value</span> <span class="pre">9',</span> <span class="pre">'value</span> <span class="pre">10']</span></code></p>
<p>The HTML-code: <code class="code docutils literal"><span class="pre">{{</span> <span class="pre">varname[0]</span> <span class="pre">}}</span></code></p>
<p>The output: <code class="code docutils literal"><span class="pre">value</span> <span class="pre">1</span></code></p>
<p>The HTML-code: <code class="code docutils literal"><span class="pre">{{</span> <span class="pre">varname[0][1]</span> <span class="pre">}}</span></code></p>
<p>The output: <code class="code docutils literal"><span class="pre">a</span></code></p>
<p>Did you noticed that I accessed the first occurrence of the array with the index of zero even we declared it with an offset of one? That is because the HTML parser begins counting from zero. So whatever your offset is the first occurrence will be zero.</p>
<p>The explanation above also applies to 2D or 3D arrays. You just add more square brackets after the variable name to access the different dimensions.</p>
</div>
</div>
</div>
<div class="section" id="command-blocks">
<h2>Command blocks<a class="headerlink" href="#command-blocks" title="Permalink to this headline">¶</a></h2>
<p>Command blocks are control structures which influences the render process of the template. So you can iterate through arrays, or render deferent HTML code when a condition is true.</p>
<div class="section" id="for">
<h3>For<a class="headerlink" href="#for" title="Permalink to this headline">¶</a></h3>
<p>Can loop over each entry in a array. For example the user list from above: <a class="reference internal" href="#template-example"><span class="std std-ref">Overview</span></a>. In the for loop you can access a special variable: <code class="code docutils literal"><span class="pre">loop.i</span></code>. This variable contains the current iteration of the loop with an index of zero. In the loop you can use the <code class="code docutils literal"><span class="pre">{%</span> <span class="pre">break</span> <span class="pre">%}</span></code> command to break out of the loop and the <code class="code docutils literal"><span class="pre">{%</span> <span class="pre">continue</span> <span class="pre">%}</span></code> command to go into the next iteration of the loop.</p>
</div>
<div class="section" id="if">
<h3>If<a class="headerlink" href="#if" title="Permalink to this headline">¶</a></h3>
<p>The if statement is based on the python if. But this one have much less functionality (at least in version 1.0). So you can compare variables with each other or a hard coded value. With the <code class="code docutils literal"><span class="pre">{%</span> <span class="pre">else</span> <span class="pre">%}</span></code> command you can switch to the else branch of the if statement.</p>
<p>Here is an example where we just want five iterations through the array &#8220;varname&#8221; from the Array <a class="reference internal" href="#array-example"><span class="std std-ref">Example</span></a>.</p>
<div class="section" id="id1">
<h4>Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-jinja"><div class="highlight"><pre><span class="x">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">entry</span> <span class="k">in</span> <span class="nv">varname</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.i</span> <span class="o">==</span> <span class="m">4</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">break</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;li&gt;</span><span class="cp">{{</span> <span class="nv">entry</span> <span class="cp">}}</span><span class="x">&lt;/li&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">end</span><span class="o">-</span><span class="k">if</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">end</span><span class="o">-</span><span class="nv">for</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/ul&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="printvars">
<h3>printVars<a class="headerlink" href="#printvars" title="Permalink to this headline">¶</a></h3>
<p>This function is just for debugging purposes. It will print out a pretty formated list of the defined variables with there corresponding values. It is recommended to wrap this command in the HTML tag <code class="code docutils literal"><span class="pre">&lt;pre&gt;</span></code> so you can read it in your browser.</p>
<div class="section" id="id2">
<h4>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><code class="code docutils literal"><span class="pre">&lt;pre&gt;{%</span> <span class="pre">printVars()</span> <span class="pre">%}&lt;/pre&gt;</span></code></p>
</div>
</div>
<div class="section" id="typeof">
<h3>typeof<a class="headerlink" href="#typeof" title="Permalink to this headline">¶</a></h3>
<p>Prints out the type of the variable which is given as a argument.</p>
<div class="section" id="id3">
<h4>Example<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p><code class="code docutils literal"><span class="pre">{%</span> <span class="pre">typeof(varname)</span> <span class="pre">%}</span></code></p>
</div>
</div>
<div class="section" id="import">
<h3>import<a class="headerlink" href="#import" title="Permalink to this headline">¶</a></h3>
<p>Imports another template that is provided after the import statement with quotation marks. This path is relative to the template_path defined in the <a class="reference internal" href="webserver.html#webserver-config"><span class="std std-ref">Server configuration</span></a>. The new template is parsed with the variable scope of the root template. It is planed to provide a second parameter which makes it possible to call a second natural program for this template.</p>
<div class="section" id="id4">
<h4>Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p><code class="code docutils literal"><span class="pre">{%</span> <span class="pre">import</span> <span class="pre">&quot;navbar.html&quot;</span> <span class="pre">%}</span></code></p>
</div>
</div>
<div class="section" id="macro">
<h3>macro<a class="headerlink" href="#macro" title="Permalink to this headline">¶</a></h3>
<p>Macros are like function you define them in a block and call them later on. You can define two types of parameter required and optional. The optional ones must be defined at the end and have a default value.</p>
<div class="section" id="id5">
<h4>Example<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">renderButton</span><span class="o">(</span><span class="nv">btn_text</span><span class="o">,</span> <span class="nv">btn_type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;button type=&quot;</span><span class="cp">{{</span> <span class="nv">btn_type</span> <span class="cp">}}</span><span class="x">&quot;&gt;btn_text&lt;/button&gt;</span>
<span class="cp">{%</span> <span class="k">end</span><span class="o">-</span><span class="nv">macro</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">renderButton</span><span class="o">(</span><span class="s2">&quot;Hello World&quot;</span><span class="o">,</span> <span class="s2">&quot;reset&quot;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">renderButton</span><span class="o">(</span><span class="s2">&quot;Hello World&quot;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;reset&quot;</span><span class="nt">&gt;</span>Hello World<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>Hello World<span class="nt">&lt;/button&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Html Parser</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#variable-blocks">Variable blocks</a><ul>
<li><a class="reference internal" href="#plain-variable">Plain variable:</a></li>
<li><a class="reference internal" href="#arrays">Arrays:</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#command-blocks">Command blocks</a><ul>
<li><a class="reference internal" href="#for">For</a></li>
<li><a class="reference internal" href="#if">If</a><ul>
<li><a class="reference internal" href="#id1">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#printvars">printVars</a><ul>
<li><a class="reference internal" href="#id2">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#typeof">typeof</a><ul>
<li><a class="reference internal" href="#id3">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#import">import</a><ul>
<li><a class="reference internal" href="#id4">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#macro">macro</a><ul>
<li><a class="reference internal" href="#id5">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="natural.html" title="previous chapter">Natural</a></li>
      <li>Next: <a href="workflow.html" title="next chapter">Workflow</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/html-parser.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Tom Engemann.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/html-parser.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>