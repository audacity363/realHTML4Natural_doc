% Generated by Sphinx.
\def\sphinxdocclass{report}
\newif\ifsphinxKeepOldNames \sphinxKeepOldNamestrue
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\usepackage{iftex}

\ifPDFTeX
  \usepackage[utf8]{inputenc}
\fi
\ifdefined\DeclareUnicodeCharacter
  \DeclareUnicodeCharacter{00A0}{\nobreakspace}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{longtable}
\usepackage{sphinx}
\usepackage{multirow}
\usepackage{eqparbox}


\addto\captionsenglish{\renewcommand{\figurename}{Fig.\@ }}
\addto\captionsenglish{\renewcommand{\tablename}{Table }}
\SetupFloatingEnvironment{literal-block}{name=Listing }

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{1}


\title{realHTML4Natural Documentation}
\date{Oct 23, 2016}
\release{1.0}
\author{Tom Engemann}
\newcommand{\sphinxlogo}{}
\renewcommand{\releasename}{Release}
\makeindex

\makeatletter
\def\PYG@reset{\let\PYG@it=\relax \let\PYG@bf=\relax%
    \let\PYG@ul=\relax \let\PYG@tc=\relax%
    \let\PYG@bc=\relax \let\PYG@ff=\relax}
\def\PYG@tok#1{\csname PYG@tok@#1\endcsname}
\def\PYG@toks#1+{\ifx\relax#1\empty\else%
    \PYG@tok{#1}\expandafter\PYG@toks\fi}
\def\PYG@do#1{\PYG@bc{\PYG@tc{\PYG@ul{%
    \PYG@it{\PYG@bf{\PYG@ff{#1}}}}}}}
\def\PYG#1#2{\PYG@reset\PYG@toks#1+\relax+\PYG@do{#2}}

\expandafter\def\csname PYG@tok@gd\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PYG@tok@gu\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PYG@tok@gt\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PYG@tok@gs\endcsname{\let\PYG@bf=\textbf}
\expandafter\def\csname PYG@tok@gr\endcsname{\def\PYG@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PYG@tok@cm\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@vg\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@m\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@mh\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@cs\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}\def\PYG@bc##1{\setlength{\fboxsep}{0pt}\colorbox[rgb]{1.00,0.94,0.94}{\strut ##1}}}
\expandafter\def\csname PYG@tok@ge\endcsname{\let\PYG@it=\textit}
\expandafter\def\csname PYG@tok@vc\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@il\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@go\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.20,0.20,0.20}{##1}}}
\expandafter\def\csname PYG@tok@cp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@gi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PYG@tok@gh\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PYG@tok@ni\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.84,0.33,0.22}{##1}}}
\expandafter\def\csname PYG@tok@nl\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.13,0.44}{##1}}}
\expandafter\def\csname PYG@tok@nn\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\expandafter\def\csname PYG@tok@no\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.38,0.68,0.84}{##1}}}
\expandafter\def\csname PYG@tok@na\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@nb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@nc\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\expandafter\def\csname PYG@tok@nd\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.33,0.33,0.33}{##1}}}
\expandafter\def\csname PYG@tok@ne\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@nf\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.49}{##1}}}
\expandafter\def\csname PYG@tok@si\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.44,0.63,0.82}{##1}}}
\expandafter\def\csname PYG@tok@s2\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@vi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@nt\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.45}{##1}}}
\expandafter\def\csname PYG@tok@nv\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@s1\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@gp\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\expandafter\def\csname PYG@tok@sh\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@ow\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@sx\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\expandafter\def\csname PYG@tok@bp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@c1\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@kc\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@c\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@mf\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@err\endcsname{\def\PYG@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PYG@tok@mb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@ss\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.32,0.47,0.09}{##1}}}
\expandafter\def\csname PYG@tok@sr\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.14,0.33,0.53}{##1}}}
\expandafter\def\csname PYG@tok@mo\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@kd\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@mi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@kn\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@o\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PYG@tok@kr\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@s\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@kp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@w\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PYG@tok@kt\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.56,0.13,0.00}{##1}}}
\expandafter\def\csname PYG@tok@sc\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@sb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@k\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@se\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@sd\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}

\def\PYGZbs{\char`\\}
\def\PYGZus{\char`\_}
\def\PYGZob{\char`\{}
\def\PYGZcb{\char`\}}
\def\PYGZca{\char`\^}
\def\PYGZam{\char`\&}
\def\PYGZlt{\char`\<}
\def\PYGZgt{\char`\>}
\def\PYGZsh{\char`\#}
\def\PYGZpc{\char`\%}
\def\PYGZdl{\char`\$}
\def\PYGZhy{\char`\-}
\def\PYGZsq{\char`\'}
\def\PYGZdq{\char`\"}
\def\PYGZti{\char`\~}
% for compatibility with earlier versions
\def\PYGZat{@}
\def\PYGZlb{[}
\def\PYGZrb{]}
\makeatother

\renewcommand\PYGZsq{\textquotesingle}

\begin{document}

\maketitle
\tableofcontents
\phantomsection\label{index::doc}


In this Documentation you will find how the project is build, how you are getting started and a full list of command that are available in the templates.


\chapter{Guide:}
\label{index:realhtml4natural-documentation}\label{index:guide}

\section{Build process and Installation}
\label{installation::doc}\label{installation:build-process-and-installation}

\subsection{Build}
\label{installation:build}
Unfortunately the build process is currently very manual.
The libraries in the folder ``libs'' are build with the Makefile in the root directory. Except the library ``mxml'', it has its own makefile.
The rest of the libraries outside of ``libs'' has there own makefiles.
So you have to edit the following Makefiles and change the \$CC variable to your compiler (where ./ is the root folder from the repository):
\begin{itemize}
\item {} 
./web\_server/Makefile

\item {} 
./var2names/Makefile

\item {} 
./libs/mxml/Makefile

\item {} 
./Makefile

\item {} 
./Makedyn

\end{itemize}

You also have to have the shared object ``libnatural.so'' from the SoftwareAG in your ``LIBPATH'' Environment variable. It should be located in your natural bin directory.
Now you should be able to just type in ``make all'' in the root folder and the complete project will be build in the right order.


\subsection{Installation}
\label{installation:installation}
There is no real installation yet but there are just two core binaries to copy:
\begin{itemize}
\item {} 
./jinja2.so

\item {} 
./web\_server/miniweb

\end{itemize}

``jinja.so'' is the shared object which provides the INTERFACE 4 functions ``genpage'' and ``flipbuf''. It must be mentioned in your NATUSER Env-var.

``miniweb'' is the web server. It is good practice to put it into your ``/usr/bin/'' folder so it is in your PATH variable and can be found by just typing ``miniweb''. The configuration files of the server you can put everywhere.
I am a fan of creating a directory in ``/etc'' which is called ``realHTML4Natural'' and putting all the configuration stuff in there.


\section{Webserver}
\label{webserver:webserver}\label{webserver::doc}
The webserver is based on the open source project miniweb (\url{http://www.http://miniweb.sourceforge.net/}) but this version is heavily modified.

This version can parse POST Requests where data is urlencoded and not an multipart message, read cookies and set new ones and of course calling natural programs.

There are two configuration files that miniweb can use. A general configuration file with how the server should be configured and a file which controls when which natural program is called.


\subsection{Server configuration}
\label{webserver:server-configuration}\label{webserver:webserver-config}
The path to this file is stored in the environment variable ``WEBCONFIG''. It can contain multiple environments. For example a configuration for test and one for production.


\subsubsection{Example}
\label{webserver:example}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZlt{}miniweb}\PYG{n+nt}{\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}environment} \PYG{n+na}{type=}\PYG{l+s}{\PYGZdq{}test\PYGZdq{}}\PYG{n+nt}{\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}routes}\PYG{n+nt}{\PYGZgt{}}/u/it/a140734/C/realHtml4Natural/web\PYGZus{}server/routes.xml\PYG{n+nt}{\PYGZlt{}/routes\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}htdocs}\PYG{n+nt}{\PYGZgt{}}/u/it/a140734/C/realHtml4Natural/web\PYGZus{}server/htdocs/\PYG{n+nt}{\PYGZlt{}/htdocs\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}templates}\PYG{n+nt}{\PYGZgt{}}/u/it/a140734/C/realHtml4Natural/web\PYGZus{}server/templates/\PYG{n+nt}{\PYGZlt{}/templates\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}natsourcepath}\PYG{n+nt}{\PYGZgt{}}/SAG/natural/fuser63/\PYG{n+nt}{\PYGZlt{}/natsourcepath\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}port}\PYG{n+nt}{\PYGZgt{}}1024\PYG{n+nt}{\PYGZlt{}/port\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}debug}\PYG{n+nt}{\PYGZgt{}}true\PYG{n+nt}{\PYGZlt{}/debug\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}naterror}\PYG{n+nt}{\PYGZgt{}}nat\PYGZus{}error.html\PYG{n+nt}{\PYGZlt{}/naterror\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}ldaerror}\PYG{n+nt}{\PYGZgt{}}\PYG{n+nt}{\PYGZlt{}/ldaerror\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}parsererror}\PYG{n+nt}{\PYGZgt{}}\PYG{n+nt}{\PYGZlt{}/parsererror\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}natparms}\PYG{n+nt}{\PYGZgt{}}\PYG{n+nt}{\PYGZlt{}/natparms\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}/environment\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}environment} \PYG{n+na}{type=}\PYG{l+s}{\PYGZdq{}production\PYGZdq{}}\PYG{n+nt}{\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}routes}\PYG{n+nt}{\PYGZgt{}}/u/it/a140734/C/realHtml4Natural/web\PYGZus{}server/routes.xml\PYG{n+nt}{\PYGZlt{}/routes\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}htdocs}\PYG{n+nt}{\PYGZgt{}}/u/it/a140734/C/realHtml4Natural/web\PYGZus{}server/htdocs/\PYG{n+nt}{\PYGZlt{}/htdocs\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}templates}\PYG{n+nt}{\PYGZgt{}}/u/it/a140734/C/realHtml4Natural/web\PYGZus{}server/templates/\PYG{n+nt}{\PYGZlt{}/templates\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}/environment\PYGZgt{}}
\PYG{n+nt}{\PYGZlt{}/miniweb\PYGZgt{}}
\end{Verbatim}


\subsubsection{Explanation enviroment tag}
\label{webserver:explanation-enviroment-tag}
With the environment tag you can setup multiple environments in which the server is running. It takes exactly one argument. The type attribute with the name of the environment.


\subsubsection{Explanation enviroment childs}
\label{webserver:explanation-enviroment-childs}
\noindent\begin{tabulary}{\linewidth}{|L|L|L|L|}
\hline
\textsf{\relax 
entry
\unskip}\relax &\textsf{\relax 
explanation
\unskip}\relax &\textsf{\relax 
default Value
\unskip}\relax &\textsf{\relax 
required
\unskip}\relax \\
\hline
routes
&
the path to the routes configuration file
&
None
&
yes
\\
\hline
htdocs
&
the path to the htdocs folder
&
None
&
yes
\\
\hline
templates
&
the path to the template folder
&
None
&
yes
\\
\hline
natsourcepath
&
path to the natural sources (must be the root directory)
&
None
&
yes
\\
\hline
port
&
port on which the webserver should listen
&
80
&
no
\\
\hline
debug
&
decide wether an error occurs to render a custom 500 page with the error message or a generic 500 error page
&
false
&
no
\\
\hline
naterror
&
the template that should be rendered when natural error occurs (debug must set to true)
&
None
&
no
\\
\hline
ldaerror
&
the template that should be rendered when error occurs while parsing the LDA (debug must set to true)
&
None
&
no
\\
\hline
parsererror
&
the template that should be rendered when error occurs while handling the template (debug must set to true)
&
None
&
no
\\
\hline
natparms
&
parameter that will be passed through to natural (the same as if you were calling natural from the binary)
&
None
&
no
\\
\hline\end{tabulary}



\subsection{Route configuration}
\label{webserver:route-configuration}
In the route configuration file you enter the natural program which should run when a specific route is called.


\subsubsection{Example}
\label{webserver:id1}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZlt{}realHtml}\PYG{n+nt}{\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}route} \PYG{n+na}{path=}\PYG{l+s}{\PYGZdq{}notizen\PYGZdq{}}\PYG{n+nt}{\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}programm}\PYG{n+nt}{\PYGZgt{}}SHNOTIZ\PYG{n+nt}{\PYGZlt{}/programm\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}alias}\PYG{n+nt}{\PYGZgt{}}\PYG{n+nt}{\PYGZlt{}/alias\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}return}\PYG{n+nt}{\PYGZgt{}}\PYG{n+nt}{\PYGZlt{}/return\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}library}\PYG{n+nt}{\PYGZgt{}}TGAP0734\PYG{n+nt}{\PYGZlt{}/library\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}/route\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}route} \PYG{n+na}{path=}\PYG{l+s}{\PYGZdq{}new\PYGZus{}notiz\PYGZdq{}}\PYG{n+nt}{\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}programm}\PYG{n+nt}{\PYGZgt{}}STNOTIZ\PYG{n+nt}{\PYGZlt{}/programm\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}library}\PYG{n+nt}{\PYGZgt{}}TGAP0734\PYG{n+nt}{\PYGZlt{}/library\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}/route\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}route} \PYG{n+na}{path=}\PYG{l+s}{\PYGZdq{}delete\PYGZus{}notiz\PYGZdq{}}\PYG{n+nt}{\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}programm}\PYG{n+nt}{\PYGZgt{}}SDENOTIZ\PYG{n+nt}{\PYGZlt{}/programm\PYGZgt{}}
        \PYG{n+nt}{\PYGZlt{}library}\PYG{n+nt}{\PYGZgt{}}TGAP0734\PYG{n+nt}{\PYGZlt{}/library\PYGZgt{}}
    \PYG{n+nt}{\PYGZlt{}/route\PYGZgt{}}
\PYG{n+nt}{\PYGZlt{}/realHtml\PYGZgt{}}
\end{Verbatim}


\subsubsection{Route tag}
\label{webserver:route-tag}
The route tag takes exactly one parameter. The path attribute. That is the URL which is requested on the server without the first slash.


\subsubsection{Explanation route childs}
\label{webserver:explanation-route-childs}
\noindent\begin{tabulary}{\linewidth}{|L|L|L|L|}
\hline
\textsf{\relax 
entry
\unskip}\relax &\textsf{\relax 
explanation
\unskip}\relax &\textsf{\relax 
default Value
\unskip}\relax &\textsf{\relax 
required
\unskip}\relax \\
\hline
program
&
the natural program that will be called
&
None
&
no
\\
\hline
library
&
the library to logon
&
None
&
no
\\
\hline
alias
&
a file in the htdocs folder that will be delivered instead of calling the natural program
&
None
&
no
\\
\hline
return
&
a HTTP code that will be returned instead of a file from htdocs or calling a natural program
&
None
&
no
\\
\hline\end{tabulary}



\subsection{Miniweb usage}
\label{webserver:miniweb-usage}\begin{optionlist}{3cm}
\item [-h]  
display this help screen
\item [-v]  
log status/error info
\item [-p]  
specifiy http port {[}default 80{]}
\item [-r]  
specify http document directory {[}default htdocs{]}
\item [-l]  
specify log file
\item [-m]  
specifiy max clients {[}default 32{]}
\item [-M]  
specifiy max clients per IP
\item [-s]  
specifiy download speed limit in KB/s {[}default: none{]}
\item [-n]  
disallow multi-part download {[}default: allow{]}
\item [-d]  
disallow directory listing {[}default ON{]}
\item [-{-}environment]  
environment to load {[}default: none{]}
\end{optionlist}


\section{Natural}
\label{natural:natural}\label{natural::doc}

\subsection{Parameter Data Area}
\label{natural:parameter-data-area}\label{natural:pda}
A parameter data area like this has to been defined. You don't have to take this exact names but the type and length has to match.

\begin{Verbatim}[commandchars=\\\{\}]
\PYG{l+m+mi}{1 }\PYG{n+nv}{VALUES\PYGZus{}REQ} \PYG{p}{(}\PYG{n+nv}{A2024}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
\PYG{l+m+mi}{1 }\PYG{n+nv}{VALUE\PYGZus{}LENGTH} \PYG{p}{(}\PYG{n+nv}{I4}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
\PYG{l+m+mi}{1 }\PYG{n+nv}{KEYS\PYGZus{}REQ} \PYG{p}{(}\PYG{n+nv}{A100}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
\PYG{l+m+mi}{1 }\PYG{n+nv}{PARM\PYGZus{}COUNT} \PYG{p}{(}\PYG{n+nv}{I4}\PYG{p}{)}
\PYG{l+m+mi}{1 }\PYG{n+nv}{REQ\PYGZus{}TYPE} \PYG{p}{(}\PYG{n+nv}{A5}\PYG{p}{)}
\PYG{l+m+mi}{1 }\PYG{n+nv}{REQ\PYGZus{}FILE} \PYG{p}{(}\PYG{n+nv}{A100}\PYG{p}{)}
\PYG{l+m+mi}{1 }\PYG{n+nv}{REQ\PYGZus{}SETTINGS} \PYG{p}{(}\PYG{n+nv}{A}\PYG{p}{)} \PYG{k+kp}{DYNAMIC}
\end{Verbatim}


\subsubsection{Explanation parameter data area}
\label{natural:explanation-parameter-data-area}
\noindent\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textsf{\relax 
variable name
\unskip}\relax &\textsf{\relax 
explanation
\unskip}\relax \\
\hline
value\_req
&
the variables value\_req and keys\_req belongs together. These two array form together a Key/Value Pair. ``value\_req'' includes the values from the GET or POST request
\\
\hline
value\_length
&
the real length of the value in occurrence n
\\
\hline
keys\_req
&
the key to the value in occurrence n
\\
\hline
parm\_count
&
includes own much entry in value\_req/value\_length/keys\_req are set
\\
\hline
req\_type
&
which HTTP request was received
\\
\hline
req\_file
&
just a internal variable. Contains the file which will be delivered to the browser
\\
\hline
req\_settings
&
just a long string which contains settings from the webserver configuration for the html parser
\\
\hline\end{tabulary}



\subsection{Variables for the template}
\label{natural:template-vars}\label{natural:variables-for-the-template}
You have to create a page group in an external local data area. Every variable under this group is available in the template. You can redefine variables and create new subgroups.


\subsubsection{Example:}
\label{natural:example}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nv}{define} \PYG{k+kr}{data} \PYG{n+nv}{local}
\PYG{l+m+mi}{1 }\PYG{k+kp}{page}
\PYG{k+kp}{   } \PYG{l+m+mi}{2 }\PYG{n+nv}{daten} \PYG{p}{(}\PYG{n+nv}{A128}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{200}\PYG{p}{)}
    \PYG{l+m+mi}{2 }\PYG{n+nv}{isnnummer} \PYG{p}{(}\PYG{n+nv}{A29}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{200}\PYG{p}{)}
    \PYG{l+m+mi}{2 }\PYG{n+nv}{maxdatenid} \PYG{p}{(}\PYG{n+nv}{I4}\PYG{p}{)}
\PYG{n+nv}{end\PYGZhy{}define}
\end{Verbatim}


\subsubsection{Supported data types}
\label{natural:datatypes}\label{natural:supported-data-types}
\noindent\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textsf{\relax 
type
\unskip}\relax &\textsf{\relax 
length
\unskip}\relax \\
\hline
Integer (I)
&
1/2/4
\\
\hline
Logical (L)
&
----
\\
\hline
Alphanumeric (A)
&
every/Dynamic
\\
\hline
Numeric (N) (Floating points are not supported yet)
&
every/Dynamic
\\
\hline
Unicode (U)
&
every/Dynamic
\\
\hline\end{tabulary}


Every Type can be also defined as 1D/2D and 3D arrays but then the dynamic length is not supported. This is due to a bug in the INTERFACE 4 API from the SAG.


\subsubsection{Other}
\label{natural:other}
You also need two Alphanumeric Variable with the length of 20. One of them has to contain the lda name which you are using to store the page group and the second must contain the name of the template you want to use.


\paragraph{Example}
\label{natural:id1}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nv}{define} \PYG{k+kr}{data}
\PYG{k+kr}{   } \PYG{n+nv}{local} \PYG{k+kp}{using} \PYG{n+nv}{your\PYGZus{}lda}
    \PYG{n+nv}{local}
        \PYG{l+m+mi}{1 }\PYG{n+nv}{realhtml\PYGZus{}ldaname}\PYG{p}{(}\PYG{n+nv}{A20}\PYG{p}{)}
        \PYG{l+m+mi}{1 }\PYG{n+nv}{realhtml\PYGZus{}template}\PYG{p}{(}\PYG{n+nv}{A20}\PYG{p}{)}
 \PYG{n+nv}{end\PYGZhy{}define}

 \PYG{k+kr}{move }\PYG{l+s+s2}{\PYGZdq{}your\PYGZus{}lda\PYGZdq{}} \PYG{k+kp}{to} \PYG{n+nv}{realhtml\PYGZus{}ldaname}
 \PYG{k+kr}{move }\PYG{l+s+s2}{\PYGZdq{}the\PYGZus{}template.html\PYGZdq{}} \PYG{k+kp}{to} \PYG{n+nv}{realhtml\PYGZus{}template}
 \PYG{k+kr}{end}
\end{Verbatim}


\subsection{The ``flipbuf'' function}
\label{natural:the-flipbuf-function}
The ``flipbuf'' function shift a specific number of digits from the beginning of the buffer to the end.

For example you want to search for a ISN number with a POST argument. The number in the POST value will be standing on the beginning of the buffer but the ISN number is sitting on the right. With the ``value\_length'' (from the pda. See {\hyperref[natural:pda]{\sphinxcrossref{\DUrole{std,std-ref}{Parameter Data Area}}}}) variable you know how long the number is.


\subsubsection{Arguments}
\label{natural:arguments}
\noindent\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textsf{\relax 
number
\unskip}\relax &\textsf{\relax 
type
\unskip}\relax &\textsf{\relax 
purpose
\unskip}\relax \\
\hline
1
&
Numeric (N)
&
input buffer
\\
\hline
2
&
Numeric (N)
&
output buffer
\\
\hline
3
&
Integer (I4)
&
length of the number
\\
\hline\end{tabulary}



\subsubsection{Example}
\label{natural:id2}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nv}{define} \PYG{k+kr}{data} \PYG{n+nv}{local}
   \PYG{l+m+mi}{1 }\PYG{n+nv}{post\PYGZus{}isn}\PYG{p}{(}\PYG{n+nv}{N19}\PYG{p}{)} \PYG{n+nv}{inti} \PYG{o}{\PYGZlt{}}\PYG{l+s+s2}{\PYGZdq{}1200000000000000000\PYGZdq{}}\PYG{o}{\PYGZgt{}} \PYG{o}{/}\PYG{o}{*}\PYG{n+nv}{The} \PYG{k+kp}{value} \PYG{k+kp}{from} \PYG{n+nv}{the} \PYG{n+nv}{post} \PYG{n+nv}{argument}
   \PYG{l+m+mi}{1 }\PYG{n+nv}{post\PYGZus{}length} \PYG{p}{(}\PYG{n+nv}{I4}\PYG{p}{)} \PYG{n+nv}{init} \PYG{o}{\PYGZlt{}}\PYG{l+m+mi}{2}\PYG{o}{\PYGZgt{}}
   \PYG{l+m+mi}{1 }\PYG{n+nv}{right\PYGZus{}isn}\PYG{p}{(}\PYG{n+nv}{N19}\PYG{p}{)}
\PYG{n+nv}{end\PYGZhy{}define}

\PYG{k+kr}{call} \PYG{n+nv}{interface4} \PYG{l+s+s2}{\PYGZdq{}flipbuf\PYGZdq{}} \PYG{n+nv}{post\PYGZus{}isn} \PYG{n+nv}{right\PYGZus{}isn} \PYG{n+nv}{post\PYGZus{}length}
\PYG{c}{* Now right\PYGZus{}isn contains the following: \PYGZdq{}0000000000000000012\PYGZdq{}}
\PYG{k+kr}{end}
\end{Verbatim}


\subsection{The ``setcookie'' function}
\label{natural:the-setcookie-function}
Nothing to see here. Currently under development. This function will be used to set new cookies and send them to the browser.


\subsection{The ``genpage'' function}
\label{natural:the-genpage-function}
The ``genpage'' function generate the html page out of the template.


\subsubsection{Arguments}
\label{natural:id3}
\noindent\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textsf{\relax 
number
\unskip}\relax &\textsf{\relax 
type
\unskip}\relax &\textsf{\relax 
purpose
\unskip}\relax \\
\hline
1
&
Alphanumeric (A20)
&
name of the lda
\\
\hline
2
&
Alphanumeric (A20)
&
name of the template
\\
\hline
3
&
Alphanumeric (A100)
&
file path which the template engine should write to
\\
\hline
4
&
Alphanumeric (A Dynamic)
&
settings string
\\
\hline
5
&
see {\hyperref[natural:datatypes]{\sphinxcrossref{\DUrole{std,std-ref}{Supported data types}}}}
&
the page group from your lda
\\
\hline\end{tabulary}



\subsubsection{Example}
\label{natural:id4}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nv}{define} \PYG{k+kr}{data} \PYG{n+nv}{local}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{lda\PYGZus{}name} \PYG{p}{(}\PYG{n+nv}{A20}\PYG{p}{)} \PYG{n+nv}{init} \PYG{o}{\PYGZlt{}}\PYG{l+s+s2}{\PYGZdq{}mylda\PYGZdq{}}\PYG{o}{\PYGZgt{}}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{template\PYGZus{}name} \PYG{p}{(}\PYG{n+nv}{A20}\PYG{p}{)} \PYG{n+nv}{init} \PYG{o}{\PYGZlt{}}\PYG{l+s+s2}{\PYGZdq{}mytemplate\PYGZdq{}}\PYG{o}{\PYGZgt{}}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{output\PYGZus{}file} \PYG{p}{(}\PYG{n+nv}{A100}\PYG{p}{)} \PYG{n+nv}{init} \PYG{o}{\PYGZlt{}}\PYG{l+s+s2}{\PYGZdq{}/tmp/outout.html\PYGZdq{}}\PYG{o}{\PYGZgt{}}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{settings} \PYG{p}{(}\PYG{n+nv}{A}\PYG{p}{)} \PYG{k+kp}{DYNAMIC} \PYG{n+nv}{init} \PYG{o}{\PYGZlt{}}\PYG{l+s+s2}{\PYGZdq{}templatepath=/tmp/templates/;debug=true\PYGZdq{}}\PYG{o}{\PYGZgt{}}
    \PYG{l+m+mi}{1 }\PYG{k+kp}{page }\PYG{o}{/}\PYG{o}{*} \PYG{n+nv}{this} \PYG{n+nv}{would} \PYG{n+nv}{be} \PYG{k+kp}{in} \PYG{n+nv}{your} \PYG{k+kp}{external} \PYG{n+nv}{lda}
        \PYG{l+m+mi}{2 }\PYG{n+nv}{field\PYGZhy{}1} \PYG{p}{(}\PYG{n+nv}{A10}\PYG{p}{)}
        \PYG{l+m+mi}{2 }\PYG{n+nv}{field\PYGZhy{}2} \PYG{p}{(}\PYG{n+nv}{A10}\PYG{p}{)}
\PYG{n+nv}{end\PYGZhy{}define}

\PYG{k+kr}{call} \PYG{n+nv}{interface4} \PYG{l+s+s2}{\PYGZdq{}genpage\PYGZdq{}} \PYG{n+nv}{lda\PYGZus{}name} \PYG{n+nv}{template\PYGZus{}name} \PYG{n+nv}{output\PYGZus{}file} \PYG{n+nv}{settings} \PYG{k+kp}{page}
\PYG{k+kr}{end}
\end{Verbatim}


\subsection{Complete skeleton}
\label{natural:complete-skeleton}

\subsubsection{The subprogram}
\label{natural:the-subprogram}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nv}{define} \PYG{k+kr}{data}
\PYG{k+kr}{    } \PYG{n+nv}{parameter} \PYG{k+kp}{using} \PYG{n+nv}{reqinfos} \PYG{o}{/}\PYG{o}{*}\PYG{n+nv}{request} \PYG{n+nv}{information}
     \PYG{n+nv}{local} \PYG{k+kp}{using} \PYG{n+nv}{testlda}
\PYG{n+nv}{end\PYGZhy{}define}

\PYG{k+kr}{move }\PYG{l+s+s2}{\PYGZdq{}testlda\PYGZdq{}} \PYG{k+kp}{to} \PYG{n+nv}{realhtml\PYGZus{}ldaname}
\PYG{k+kr}{move }\PYG{l+s+s2}{\PYGZdq{}testtemplate.html\PYGZdq{}} \PYG{k+kp}{to} \PYG{n+nv}{realhtml\PYGZus{}template}

\PYG{o}{/}\PYG{o}{*} \PYG{n+nv}{your} \PYG{k+kp}{code} \PYG{n+nv}{goes} \PYG{n+nv}{here}

\PYG{k+kr}{call} \PYG{n+nv}{interface4} \PYG{l+s+s2}{\PYGZdq{}genpage\PYGZdq{}} \PYG{n+nv}{realhtml\PYGZus{}ldaname} \PYG{n+nv}{realhtml\PYGZus{}template}
                          \PYG{n+nv}{req\PYGZus{}file} \PYG{n+nv}{req\PYGZus{}settings} \PYG{k+kp}{page}
\end{Verbatim}


\subsubsection{The LDA}
\label{natural:the-lda}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nv}{define} \PYG{k+kr}{data} \PYG{n+nv}{local}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{realhtml\PYGZus{}ldaname} \PYG{p}{(}\PYG{n+nv}{A20}\PYG{p}{)}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{realhtml\PYGZus{}template} \PYG{p}{(}\PYG{n+nv}{A20}\PYG{p}{)}
    \PYG{l+m+mi}{1 }\PYG{k+kp}{page}
\PYG{k+kp}{       } \PYG{l+m+mi}{2 }\PYG{n+nv}{field\PYGZhy{}1} \PYG{p}{(}\PYG{n+nv}{A10}\PYG{p}{)}
        \PYG{l+m+mi}{2 }\PYG{n+nv}{field\PYGZhy{}2} \PYG{p}{(}\PYG{n+nv}{A20}\PYG{p}{)}
\PYG{n+nv}{end\PYGZhy{}define}
\end{Verbatim}


\subsubsection{The PDA}
\label{natural:the-pda}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nv}{DEFINE} \PYG{k+kr}{DATA} \PYG{n+nv}{PARAMETER}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{VALUES\PYGZus{}REQ} \PYG{p}{(}\PYG{n+nv}{A2024}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{VALUE\PYGZus{}LENGTH} \PYG{p}{(}\PYG{n+nv}{I4}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{REQ\PYGZus{}KEYS} \PYG{p}{(}\PYG{n+nv}{A100}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{PARM\PYGZus{}COUNT} \PYG{p}{(}\PYG{n+nv}{I4}\PYG{p}{)}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{REQ\PYGZus{}TYPE} \PYG{p}{(}\PYG{n+nv}{A5}\PYG{p}{)}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{REQ\PYGZus{}FILE} \PYG{p}{(}\PYG{n+nv}{A100}\PYG{p}{)}
    \PYG{l+m+mi}{1 }\PYG{n+nv}{REQ\PYGZus{}SETTINGS} \PYG{p}{(}\PYG{n+nv}{A}\PYG{p}{)} \PYG{k+kp}{DYNAMIC}
\PYG{n+nv}{END\PYGZhy{}DEFINE}
\end{Verbatim}


\section{Html Parser}
\label{html-parser::doc}\label{html-parser:html-parser}

\subsection{Overview}
\label{html-parser:overview}\label{html-parser:template-example}
The syntax of the templates are inspirited from the template engine \href{http://jinja.pocoo.org/}{jinja} which is written in python.

In contrast to natural4ajax you will write here your own HTML code. In your HTML code you can use two types of blocks to refer to variables or check them if they equals to a specific condition.

Here is an simple example:

\begin{Verbatim}[commandchars=\\\{\}]
\PYG{x}{ \PYGZlt{}html\PYGZgt{}}
\PYG{x}{     \PYGZlt{}head\PYGZgt{}}
\PYG{x}{         \PYGZlt{}title\PYGZgt{}Hello World\PYGZlt{}/title\PYGZgt{}}
\PYG{x}{     \PYGZlt{}/head\PYGZgt{}}
\PYG{x}{     \PYGZlt{}body\PYGZgt{}}
\PYG{x}{         \PYGZlt{}table\PYGZgt{}}
\PYG{x}{             \PYGZlt{}thead\PYGZgt{}}
\PYG{x}{                 \PYGZlt{}th\PYGZgt{}id\PYGZlt{}/th\PYGZgt{}}
\PYG{x}{                 \PYGZlt{}th\PYGZgt{}name\PYGZlt{}/th\PYGZgt{}}
\PYG{x}{                 \PYGZlt{}th\PYGZgt{}lastname\PYGZlt{}/th\PYGZgt{}}
\PYG{x}{            \PYGZlt{}/thead\PYGZgt{}}
\PYG{x}{            \PYGZlt{}tbody\PYGZgt{}}
\PYG{x}{            }\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{for} \PYG{n+nv}{user} \PYG{k}{in} \PYG{n+nv}{username} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{x}{                \PYGZlt{}tr\PYGZgt{}}
\PYG{x}{                     \PYGZlt{}td\PYGZgt{}}\PYG{c+cp}{\PYGZob{}\PYGZob{}} \PYG{n+nv}{isnnumber}\PYG{o}{[}\PYG{n+nb}{loop}\PYG{n+nv}{.i}\PYG{o}{]}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n+nv}{tr}\PYG{o}{\PYGZgt{}}
                     \PYG{o}{\PYGZlt{}}\PYG{n+nv}{td}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}} \PYG{n+nv}{user} \PYG{c+cp}{\PYGZcb{}\PYGZcb{}}\PYG{x}{\PYGZlt{}/tr\PYGZgt{}}
\PYG{x}{                     \PYGZlt{}td\PYGZgt{}}\PYG{c+cp}{\PYGZob{}\PYGZob{}} \PYG{n+nv}{firstname}\PYG{o}{[}\PYG{n+nb}{loop}\PYG{n+nv}{.i}\PYG{o}{]} \PYG{c+cp}{\PYGZcb{}\PYGZcb{}}\PYG{x}{\PYGZlt{}/tr\PYGZgt{}}
\PYG{x}{                \PYGZlt{}/tr\PYGZgt{}}
\PYG{x}{            }\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{end}\PYG{o}{\PYGZhy{}}\PYG{n+nv}{for} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{x}{            \PYGZlt{}/tbody\PYGZgt{}}
\PYG{x}{        \PYGZlt{}/table\PYGZgt{}}
\PYG{x}{    \PYGZlt{}/body\PYGZgt{}}
\PYG{x}{\PYGZlt{}/html\PYGZgt{}}
\end{Verbatim}

With the LDA:

\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nv}{define} \PYG{k+kr}{data} \PYG{n+nv}{local}
\PYG{l+m+mi}{1 }\PYG{k+kp}{page}
\PYG{k+kp}{  } \PYG{l+m+mi}{2 }\PYG{n+nv}{isnnumber} \PYG{p}{(}\PYG{n+nv}{N19}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
   \PYG{l+m+mi}{2 }\PYG{n+nv}{username} \PYG{p}{(}\PYG{n+nv}{A20}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
   \PYG{l+m+mi}{2 }\PYG{n+nv}{firstname} \PYG{p}{(}\PYG{n+nv}{A20}\PYG{o}{/}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{l+m+mi}{20}\PYG{p}{)}
\PYG{n+nv}{end\PYGZhy{}define}
\end{Verbatim}

There are two types of blocks. First the variable block (\sphinxcode{\{\{ ... \}\}}) which will just be replaced with the value of the variable and second the command block (\sphinxcode{\{\% ... \%\}}). The command block reacts like a if or  for block in natural. It have a command line (the first one) where you specify the break condition and a end line where the block ends.


\subsection{Variable blocks}
\label{html-parser:variable-blocks}
As in the section {\hyperref[natural:template\string-vars]{\sphinxcrossref{\DUrole{std,std-ref}{Variables for the template}}}} explained you have available every variable that is defined under the page group in your LDA. If a variable is not known the HTML parser will exit with an error message and will be render a error page instead. Currently (Version 1.0) it is not possible to add two variable blocks in one line. The parser would just print out the complete block without parsing it. I am working on this problem.


\subsubsection{Plain variable:}
\label{html-parser:plain-variable}
Let's assume that you have defined a variable with the name ``varname'' which has the type alphanumeric with the length of 20 bytes. When you just write \sphinxcode{\{\{ varname \}\}} it would be replaced with the value. But you can also handle it as an array by adding square brackets after the name: \sphinxcode{\{\{ varname{[}0{]} \}\}}. Now you would get the value saved at the position zero of the variable. If you have spaces at the end the parser will automatically trim the value to the last non space character.


\subsubsection{Arrays:}
\label{html-parser:arrays}
Now let's chance the variable to array with 10 occurrences. In this situation the behavior of the variable block change a little bit. It will be still replace the complete block with the value but when you don't specify a index a JSON string will be generated and printed out. But when you don't what that you can specify a index in square brackets (\sphinxcode{\{\{ varname{[}0{]} \}\}}). Even here you can access the individual characters with a second index (\sphinxcode{\{\{ varname{[}0{]}{[}1{]} \}\}}).


\paragraph{Example}
\label{html-parser:example}\label{html-parser:array-example}
The variable: \sphinxcode{2 varname(A20/1:10)}

The HTML-code: \sphinxcode{\{\{ varname \}\}}

The output: \sphinxcode{{[}'value 1', 'value 2', 'value 3', 'value 4', 'value 5', 'value 6', 'value 7', 'value 8', 'value 9', 'value 10'{]}}

The HTML-code: \sphinxcode{\{\{ varname{[}0{]} \}\}}

The output: \sphinxcode{value 1}

The HTML-code: \sphinxcode{\{\{ varname{[}0{]}{[}1{]} \}\}}

The output: \sphinxcode{a}

Did you noticed that I accessed the first occurrence of the array with the index of zero even we declared it with an offset of one? That is because the HTML parser begins counting from zero. So whatever your offset is the first occurrence will be zero.

The explanation above also applies to 2D or 3D arrays. You just add more square brackets after the variable name to access the different dimensions.


\subsection{Command blocks}
\label{html-parser:command-blocks}
Command blocks are control structures which influences the render process of the template. So you can iterate through arrays, or render deferent HTML code when a condition is true.


\subsubsection{For}
\label{html-parser:for}
Can loop over each entry in a array. For example the user list from above: {\hyperref[html\string-parser:template\string-example]{\sphinxcrossref{\DUrole{std,std-ref}{Overview}}}}. In the for loop you can access a special variable: \sphinxcode{loop.i}. This variable contains the current iteration of the loop with an index of zero. In the loop you can use the \sphinxcode{\{\% break \%\}} command to break out of the loop and the \sphinxcode{\{\% continue \%\}} command to go into the next iteration of the loop.


\subsubsection{If}
\label{html-parser:if}
The if statement is based on the python if. But this one have much less functionality (at least in version 1.0). So you can compare variables with each other or a hard coded value. With the \sphinxcode{\{\% else \%\}} command you can switch to the else branch of the if statement.

Here is an example where we just want five iterations through the array ``varname'' from the Array {\hyperref[html\string-parser:array\string-example]{\sphinxcrossref{\DUrole{std,std-ref}{Example}}}}.


\paragraph{Example}
\label{html-parser:id1}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{x}{\PYGZlt{}ul\PYGZgt{}}
\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{for} \PYG{n+nv}{entry} \PYG{k}{in} \PYG{n+nv}{varname} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{x}{    }\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{if} \PYG{n+nb}{loop}\PYG{n+nv}{.i} \PYG{o}{==} \PYG{l+m}{4} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{x}{        }\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{break} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{x}{    }\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{else} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{x}{        \PYGZlt{}li\PYGZgt{}}\PYG{c+cp}{\PYGZob{}\PYGZob{}} \PYG{n+nv}{entry} \PYG{c+cp}{\PYGZcb{}\PYGZcb{}}\PYG{x}{\PYGZlt{}/li\PYGZgt{}}
\PYG{x}{    }\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{end}\PYG{o}{\PYGZhy{}}\PYG{k}{if} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{end}\PYG{o}{\PYGZhy{}}\PYG{n+nv}{for} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{x}{\PYGZlt{}/ul\PYGZgt{}}
\end{Verbatim}


\subsubsection{printVars}
\label{html-parser:printvars}
This function is just for debugging purposes. It will print out a pretty formated list of the defined variables with there corresponding values. It is recommended to wrap this command in the HTML tag \sphinxcode{\textless{}pre\textgreater{}} so you can read it in your browser.


\paragraph{Example}
\label{html-parser:id2}
\sphinxcode{\textless{}pre\textgreater{}\{\% printVars() \%\}\textless{}/pre\textgreater{}}


\subsubsection{typeof}
\label{html-parser:typeof}
Prints out the type of the variable which is given as a argument.


\paragraph{Example}
\label{html-parser:id3}
\sphinxcode{\{\% typeof(varname) \%\}}


\subsubsection{import}
\label{html-parser:import}
Imports another template that is provided after the import statement with quotation marks. This path is relative to the template\_path defined in the {\hyperref[webserver:webserver\string-config]{\sphinxcrossref{\DUrole{std,std-ref}{Server configuration}}}}. The new template is parsed with the variable scope of the root template. It is planed to provide a second parameter which makes it possible to call a second natural program for this template.


\paragraph{Example}
\label{html-parser:id4}
\sphinxcode{\{\% import "navbar.html" \%\}}


\subsubsection{macro}
\label{html-parser:macro}
Macros are like function you define them in a block and call them later on. You can define two types of parameter required and optional. The optional ones must be defined at the end and have a default value.


\paragraph{Example}
\label{html-parser:id5}
\begin{Verbatim}[commandchars=\\\{\}]
\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{macro} \PYG{n+nv}{renderButton}\PYG{o}{(}\PYG{n+nv}{btn\PYGZus{}text}\PYG{o}{,} \PYG{n+nv}{btn\PYGZus{}type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}submit\PYGZdq{}}\PYG{o}{)} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{x}{    \PYGZlt{}button type=\PYGZdq{}}\PYG{c+cp}{\PYGZob{}\PYGZob{}} \PYG{n+nv}{btn\PYGZus{}type} \PYG{c+cp}{\PYGZcb{}\PYGZcb{}}\PYG{x}{\PYGZdq{}\PYGZgt{}btn\PYGZus{}text\PYGZlt{}/button\PYGZgt{}}
\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{end}\PYG{o}{\PYGZhy{}}\PYG{n+nv}{macro} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}

\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{renderButton}\PYG{o}{(}\PYG{l+s+s2}{\PYGZdq{}Hello World\PYGZdq{}}\PYG{o}{,} \PYG{l+s+s2}{\PYGZdq{}reset\PYGZdq{}}\PYG{o}{)} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\PYG{c+cp}{\PYGZob{}\PYGZpc{}} \PYG{k}{renderButton}\PYG{o}{(}\PYG{l+s+s2}{\PYGZdq{}Hello World\PYGZdq{}}\PYG{o}{)} \PYG{c+cp}{\PYGZpc{}\PYGZcb{}}
\end{Verbatim}

Output:

\begin{Verbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZlt{}button} \PYG{n+na}{type=}\PYG{l+s}{\PYGZdq{}reset\PYGZdq{}}\PYG{n+nt}{\PYGZgt{}}Hello World\PYG{n+nt}{\PYGZlt{}/button\PYGZgt{}}
\PYG{n+nt}{\PYGZlt{}button} \PYG{n+na}{type=}\PYG{l+s}{\PYGZdq{}submit\PYGZdq{}}\PYG{n+nt}{\PYGZgt{}}Hello World\PYG{n+nt}{\PYGZlt{}/button\PYGZgt{}}
\end{Verbatim}


\section{Workflow}
\label{workflow::doc}\label{workflow:workflow}
Placeholder


\chapter{Indices and tables}
\label{index:indices-and-tables}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}



\renewcommand{\indexname}{Index}
\printindex
\end{document}
